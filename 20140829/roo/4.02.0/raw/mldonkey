++ opam install mldonkey -e ubuntu
+ depext=zlib1g-dev
Ubuntu depexts: zlib1g-dev
+ echo Ubuntu depexts: zlib1g-dev
+ '[' zlib1g-dev '!=' '' ']'
+ sudo apt-get install -qq -y build-essential m4
+ sudo apt-get install -qq -y zlib1g-dev
debconf: unable to initialize frontend: Dialog
debconf: (Dialog frontend will not work on a dumb terminal, an emacs shell buffer, or without a controlling terminal.)
debconf: falling back to frontend: Readline
debconf: unable to initialize frontend: Readline
debconf: (This frontend requires a controlling tty.)
debconf: falling back to frontend: Teletype
dpkg-preconfigure: unable to re-open stdin: 
Selecting previously unselected package zlib1g-dev:amd64.
(Reading database ... 20147 files and directories currently installed.)
Preparing to unpack .../zlib1g-dev_1%3a1.2.8.dfsg-1ubuntu1_amd64.deb ...
Unpacking zlib1g-dev:amd64 (1:1.2.8.dfsg-1ubuntu1) ...
Setting up zlib1g-dev:amd64 (1:1.2.8.dfsg-1ubuntu1) ...
++ opam install mldonkey -e source,linux
+ srcext=
+ echo Ubuntu srcexts:
+ '[' '' '!=' '' ']'
+ opam install mldonkey
Ubuntu srcexts:
The following actions will be performed:
 - install   mldonkey.3.1.5
=== 1 to install ===

=-=- Synchronizing package archives -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[default] Synchronizing with /home/opam/opam-repository/archives/mldonkey.3.1.5+opam.tar.gz
sending incremental file list
mldonkey.3.1.5+opam.tar.gz

sent 3,575,956 bytes  received 35 bytes  7,151,982.00 bytes/sec
total size is 3,574,953  speedup is 1.00

=-=- Installing packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Building mldonkey.3.1.5:
  ./configure --enable-debug --prefix /home/opam/.opam/4.02.0+trunk
  make
  make install
Arguments to configure:  '--enable-option-checking=fatal' '--enable-debug' '--prefix' '/home/opam/.opam/4.02.0+trunk'
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -E
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu

--------------------------------
     Checking system tools.
--------------------------------
checking for ranlib... ranlib
checking for gmake... no
checking for make... make
checking if make is GNU make ... yes
checking for bzip2... bzip2
checking for gzip... (cached) bzip2
checking for perl... /usr/bin/perl
checking for rpmbuild... no
checking for rpm... no
checking for wget... no
checking for wget... /home/opam/.opam/4.02.0+trunk/build/mldonkey.3.1.5/config/wget
----------------------------------------
     Checking system tools finished.
----------------------------------------

--------------------------------
     Checking OCaml compiler.
--------------------------------
checking for ocamlc.opt... /home/opam/.opam/4.02.0+trunk/bin/ocamlc.opt
checking for ocamlc... /home/opam/.opam/4.02.0+trunk/bin/ocamlc.opt
checking for camlp4... no
********  Objective-Caml 3.12.0 is required  *********
Do you want this script to try to download and install ocaml
LOCALLY in mldonkey directory ?
*******  Check http://caml.inria.fr/  ********
./configure: line 4943: read: read error: 0: Bad file descriptor
[ERROR] The compilation of mldonkey.3.1.5 failed.
Removing mldonkey.3.1.5.
  Nothing to do.


#=== ERROR while installing mldonkey.3.1.5 ====================================#
# opam-version         1.2.0~beta4 (f1b5dba54b197e6bdd7278503a66d1039af87d80)
# os                   linux
# command              ./configure --enable-debug --prefix /home/opam/.opam/4.02.0+trunk
# path                 /home/opam/.opam/4.02.0+trunk/build/mldonkey.3.1.5
# compiler             4.02.0+trunk
# exit-code            1
# env-file             /home/opam/.opam/4.02.0+trunk/build/mldonkey.3.1.5/mldonkey-168-6d07ae.env
# stdout-file          /home/opam/.opam/4.02.0+trunk/build/mldonkey.3.1.5/mldonkey-168-6d07ae.out
# stderr-file          /home/opam/.opam/4.02.0+trunk/build/mldonkey.3.1.5/mldonkey-168-6d07ae.err
### stdout ###
# ...[truncated]
# ----------------------------------------
# 
# --------------------------------
#      Checking OCaml compiler.
# --------------------------------
# checking for ocamlc.opt... /home/opam/.opam/4.02.0+trunk/bin/ocamlc.opt
# checking for ocamlc... /home/opam/.opam/4.02.0+trunk/bin/ocamlc.opt
# checking for camlp4... no
# Do you want this script to try to download and install ocaml
# LOCALLY in mldonkey directory ?
### stderr ###
# ********  Objective-Caml 3.12.0 is required  *********
# *******  Check http://caml.inria.fr/  ********
# ./configure: line 4943: read: read error: 0: Bad file descriptor

'opam install mldonkey' failed.
