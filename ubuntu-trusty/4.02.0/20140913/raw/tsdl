++ opam install tsdl -e ubuntu
+ depext=libffi-dev
+ echo Ubuntu depexts: libffi-dev
Ubuntu depexts: libffi-dev
+ '[' libffi-dev '!=' '' ']'
+ sudo apt-get install -qq -y build-essential m4
+ sudo apt-get install -qq -y libffi-dev
debconf: unable to initialize frontend: Dialog
debconf: (Dialog frontend will not work on a dumb terminal, an emacs shell buffer, or without a controlling terminal.)
debconf: falling back to frontend: Readline
debconf: unable to initialize frontend: Readline
debconf: (This frontend requires a controlling tty.)
debconf: falling back to frontend: Teletype
dpkg-preconfigure: unable to re-open stdin: 
Selecting previously unselected package libffi-dev:amd64.
(Reading database ... 21244 files and directories currently installed.)
Preparing to unpack .../libffi-dev_3.1~rc1+r3.0.13-12_amd64.deb ...
Unpacking libffi-dev:amd64 (3.1~rc1+r3.0.13-12) ...
Setting up libffi-dev:amd64 (3.1~rc1+r3.0.13-12) ...
++ opam install tsdl -e source,linux
+ srcext=https://gist.githubusercontent.com/dbuenzli/4e10a77550bb43af2606/raw/f0c72c1108aef13a4b1cf27221017cc85750c1ca/sdl-install.sh
+ echo Ubuntu srcexts: https://gist.githubusercontent.com/dbuenzli/4e10a77550bb43af2606/raw/f0c72c1108aef13a4b1cf27221017cc85750c1ca/sdl-install.sh
+ '[' https://gist.githubusercontent.com/dbuenzli/4e10a77550bb43af2606/raw/f0c72c1108aef13a4b1cf27221017cc85750c1ca/sdl-install.sh '!=' '' ']'
Ubuntu srcexts: https://gist.githubusercontent.com/dbuenzli/4e10a77550bb43af2606/raw/f0c72c1108aef13a4b1cf27221017cc85750c1ca/sdl-install.sh
++ mktemp
+ t=/tmp/tmp.xM37KtV7Eg
+ curl -sL https://gist.githubusercontent.com/dbuenzli/4e10a77550bb43af2606/raw/f0c72c1108aef13a4b1cf27221017cc85750c1ca/sdl-install.sh
+ bash -ex /tmp/tmp.xM37KtV7Eg
+ opam install tsdl
The following actions will be performed:
 - install   base-bytes.base                       [required by ctypes]
 - install   ctypes.0.3.3                          [required by tsdl]
 - install   tsdl.0.8.1
=== 3 to install ===

=-=- Synchronizing package archives -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[default] Synchronizing with /home/opam/opam-repository/archives/ctypes.0.3.3+opam.tar.gz
[default] Synchronizing with /home/opam/opam-repository/archives/tsdl.0.8.1+opam.tar.gz
sending incremental file list
ctypes.0.3.3+opam.tar.gz
sending incremental file list
tsdl.0.8.1+opam.tar.gz

sent 132,062 bytes  received 35 bytes  264,194.00 bytes/sec
total size is 131,901  speedup is 1.00

sent 193,104 bytes  received 35 bytes  386,278.00 bytes/sec
total size is 192,937  speedup is 1.00

=-=- Installing packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Installing base-bytes.base.
Building ctypes.0.3.3:
  make
  make install
ocaml src/discover/discover.ml -ocamlc "ocamlfind ocamlc"
testing for brew: .............................. unavailable
testing for pkg-config: ........................ available
testing for libffi: ............................ available
testing for no_as_needed: ...................... available
ocamlfind opt -c -o _build/src/configure/make_primitive_details.cmx        -I _build/src/configure  src/configure/make_primitive_details.ml
cd _build/src/configure && ocamlfind ocamlc -c -ccopt -fPIC -ccopt -Wall -ccopt -O3 -ccopt -I -ccopt /home/opam/opam-repository/src -ccopt -I -ccopt /home/opam/opam-repository/tests -o make_primitive_details_stubs.o  /home/opam/.opam/4.02.0/build/ctypes.0.3.3/src/configure/make_primitive_details_stubs.c
ocamlfind opt -I _build -linkpkg      -o _build/configure.native _build/src/configure/make_primitive_details.cmx _build/src/configure/make_primitive_details_stubs.o  
