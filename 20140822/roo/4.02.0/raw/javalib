++ opam install javalib -e ubuntu
+ depext=zlib1g-dev
Ubuntu depexts: zlib1g-dev
+ echo Ubuntu depexts: zlib1g-dev
+ '[' zlib1g-dev '!=' '' ']'
+ sudo apt-get install -qq -y build-essential m4
+ sudo apt-get install -qq -y zlib1g-dev
debconf: unable to initialize frontend: Dialog
debconf: (Dialog frontend will not work on a dumb terminal, an emacs shell buffer, or without a controlling terminal.)
debconf: falling back to frontend: Readline
debconf: unable to initialize frontend: Readline
debconf: (This frontend requires a controlling tty.)
debconf: falling back to frontend: Teletype
dpkg-preconfigure: unable to re-open stdin: 
Selecting previously unselected package zlib1g-dev:amd64.
(Reading database ... 20147 files and directories currently installed.)
Preparing to unpack .../zlib1g-dev_1%3a1.2.8.dfsg-1ubuntu1_amd64.deb ...
Unpacking zlib1g-dev:amd64 (1:1.2.8.dfsg-1ubuntu1) ...
Setting up zlib1g-dev:amd64 (1:1.2.8.dfsg-1ubuntu1) ...
++ opam install javalib -e source,linux
+ srcext=
Ubuntu srcexts:
+ echo Ubuntu srcexts:
+ '[' '' '!=' '' ']'
+ opam install javalib
The following actions will be performed:
 - install   camlzip.1.05                          [required by javalib]
 - install   extlib-compat.1.6.1                   [required by javalib]
 - install   javalib.2.3
=== 3 to install ===

=-=- Synchronizing package archives -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[default] Synchronizing with /home/opam/opam-repository/archives/camlzip.1.05+opam.tar.gz
[default] Synchronizing with /home/opam/opam-repository/archives/extlib-compat.1.6.1+opam.tar.gz
[default] Synchronizing with /home/opam/opam-repository/archives/javalib.2.3+opam.tar.gz
sending incremental file list
camlzip.1.05+opam.tar.gz
sending incremental file list
extlib-compat.1.6.1+opam.tar.gz
sending incremental file list
javalib.2.3+opam.tar.gz

sent 26,596 bytes  received 35 bytes  53,262.00 bytes/sec
total size is 26,463  speedup is 0.99

sent 73,151 bytes  received 35 bytes  146,372.00 bytes/sec
total size is 72,999  speedup is 1.00

sent 585,108 bytes  received 35 bytes  1,170,286.00 bytes/sec
total size is 584,844  speedup is 1.00

=-=- Installing packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Applying fix-install.patch.
patching file META
patching file Makefile
Building camlzip.1.05:
  make all
  make allopt
  make install-findlib
ocamlc -g -c -ccopt -g -ccopt -I/usr/local/include zlibstubs.c
ocamlmklib -oc camlzip zlibstubs.o \
            -L/usr/local/lib -lz
ocamlc -g -c zlib.mli
ocamlc -g -c zlib.ml
File "zlib.ml", line 49, characters 14-27:
Warning 3: deprecated: String.create
File "zlib.ml", line 50, characters 15-28:
Warning 3: deprecated: String.create
File "zlib.ml", line 72, characters 15-28:
Warning 3: deprecated: String.create
File "zlib.ml", line 91, characters 14-27:
Warning 3: deprecated: String.create
File "zlib.ml", line 92, characters 15-28:
Warning 3: deprecated: String.create
ocamlc -g -c zip.mli
ocamlc -g -c zip.ml
File "zip.ml", line 31, characters 10-23:
Warning 3: deprecated: String.create
File "zip.ml", line 120, characters 12-25:
Warning 3: deprecated: String.create
File "zip.ml", line 272, characters 14-27:
Warning 3: deprecated: String.create
File "zip.ml", line 319, characters 18-31:
Warning 3: deprecated: String.create
File "zip.ml", line 510, characters 18-31:
Warning 3: deprecated: String.create
ocamlc -g -c gzip.mli
ocamlc -g -c gzip.ml
File "gzip.ml", line 68, characters 16-29:
Warning 3: deprecated: String.create
File "gzip.ml", line 149, characters 18-31:
Warning 3: deprecated: String.create
File "gzip.ml", line 185, characters 17-30:
Warning 3: deprecated: String.create
File "gzip.ml", line 218, characters 2-22:
Warning 3: deprecated: String.set
ocamlmklib -o zip -oc camlzip zlib.cmo zip.cmo gzip.cmo \
            -L/usr/local/lib -lz
ocamlopt -c zlib.ml
File "zlib.ml", line 49, characters 14-27:
Warning 3: deprecated: String.create
File "zlib.ml", line 50, characters 15-28:
Warning 3: deprecated: String.create
File "zlib.ml", line 72, characters 15-28:
Warning 3: deprecated: String.create
File "zlib.ml", line 91, characters 14-27:
Warning 3: deprecated: String.create
File "zlib.ml", line 92, characters 15-28:
Warning 3: deprecated: String.create
ocamlopt -c zip.ml
File "zip.ml", line 31, characters 10-23:
Warning 3: deprecated: String.create
File "zip.ml", line 120, characters 12-25:
Warning 3: deprecated: String.create
File "zip.ml", line 272, characters 14-27:
Warning 3: deprecated: String.create
File "zip.ml", line 319, characters 18-31:
Warning 3: deprecated: String.create
File "zip.ml", line 510, characters 18-31:
Warning 3: deprecated: String.create
ocamlopt -c gzip.ml
File "gzip.ml", line 68, characters 16-29:
Warning 3: deprecated: String.create
File "gzip.ml", line 149, characters 18-31:
Warning 3: deprecated: String.create
File "gzip.ml", line 185, characters 17-30:
Warning 3: deprecated: String.create
File "gzip.ml", line 218, characters 2-22:
Warning 3: deprecated: String.set
ocamlmklib -o zip -oc camlzip zlib.cmx zip.cmx gzip.cmx \
            -L/usr/local/lib -lz
ocamlopt -shared -linkall -I ./ -o zip.cmxs zip.cmxa
ocamlfind install zip META *.mli *.a *.cmi *.cma gzip.cmx zip.cmx zlib.cmx zip.cmxa zip.cmxs dllcamlzip.so
Installed /home/opam/.opam/4.02.0+trunk/lib/zip/zip.cmxs
Installed /home/opam/.opam/4.02.0+trunk/lib/zip/zip.cmxa
Installed /home/opam/.opam/4.02.0+trunk/lib/zip/zlib.cmx
Installed /home/opam/.opam/4.02.0+trunk/lib/zip/zip.cmx
Installed /home/opam/.opam/4.02.0+trunk/lib/zip/gzip.cmx
Installed /home/opam/.opam/4.02.0+trunk/lib/zip/zip.cma
Installed /home/opam/.opam/4.02.0+trunk/lib/zip/zlib.cmi
Installed /home/opam/.opam/4.02.0+trunk/lib/zip/zip.cmi
Installed /home/opam/.opam/4.02.0+trunk/lib/zip/gzip.cmi
Installed /home/opam/.opam/4.02.0+trunk/lib/zip/zip.a
Installed /home/opam/.opam/4.02.0+trunk/lib/zip/libcamlzip.a
Installed /home/opam/.opam/4.02.0+trunk/lib/zip/zlib.mli
Installed /home/opam/.opam/4.02.0+trunk/lib/zip/zip.mli
Installed /home/opam/.opam/4.02.0+trunk/lib/zip/gzip.mli
Installed /home/opam/.opam/4.02.0+trunk/lib/zip/META
Installed /home/opam/.opam/4.02.0+trunk/lib/stublibs/dllcamlzip.so
Installed /home/opam/.opam/4.02.0+trunk/lib/stublibs/dllcamlzip.so.owner
ocamlfind: [WARNING] You have installed DLLs but the directory /home/opam/.opam/4.02.0+trunk/lib/stublibs is not mentioned in ld.conf
echo 'directory="../zip"' >> META && ocamlfind install camlzip META
Installed /home/opam/.opam/4.02.0+trunk/lib/camlzip/META
Installing camlzip.1.05.
Building extlib-compat.1.6.1:
  make build install
ocamlc -g -c enum.mli enum.ml
ocamlc -g -c bitSet.mli bitSet.ml
File "bitSet.ml", line 23, characters 40-53:
Warning 3: deprecated: String.create
File "bitSet.ml", line 28, characters 64-75:
Warning 3: deprecated: String.fill
ocamlc -g -c dynArray.mli dynArray.ml
ocamlc -g -c extArray.mli extArray.ml
camlp4of pr_o.cmo -D OCAML4 -impl extHashtbl.mlpp -o extHashtbl.ml
make: camlp4of: Command not found
make: *** [extHashtbl.ml] Error 127
[ERROR] The compilation of extlib-compat.1.6.1 failed.
Removing extlib-compat.1.6.1.
  ocamlfind remove extlib
ocamlfind: [WARNING] No such directory: /home/opam/.opam/4.02.0+trunk/lib/extlib

#=== ERROR while installing extlib-compat.1.6.1 ===============================#
# opam-version         1.2.0~beta4 (b20433ccd4fb06c854e7d9af73b8f310c42a6b5c)
# os                   linux
# command              make build install
# path                 /home/opam/.opam/4.02.0+trunk/build/extlib-compat.1.6.1
# compiler             4.02.0+trunk
# exit-code            2
# env-file             /home/opam/.opam/4.02.0+trunk/build/extlib-compat.1.6.1/extlib-compat-305-d8a4ae.env
# stdout-file          /home/opam/.opam/4.02.0+trunk/build/extlib-compat.1.6.1/extlib-compat-305-d8a4ae.out
# stderr-file          /home/opam/.opam/4.02.0+trunk/build/extlib-compat.1.6.1/extlib-compat-305-d8a4ae.err
### stdout ###
# ocamlc -g -c enum.mli enum.ml
# ocamlc -g -c bitSet.mli bitSet.ml
# ocamlc -g -c dynArray.mli dynArray.ml
# ocamlc -g -c extArray.mli extArray.ml
# camlp4of pr_o.cmo -D OCAML4 -impl extHashtbl.mlpp -o extHashtbl.ml
### stderr ###
# File "bitSet.ml", line 23, characters 40-53:
# Warning 3: deprecated: String.create
# File "bitSet.ml", line 28, characters 64-75:
# Warning 3: deprecated: String.fill
# make: camlp4of: Command not found
# make: *** [extHashtbl.ml] Error 127



=-=- Error report -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
These actions have been completed successfully
 - install   camlzip.1.05
The following failed
 - install   extlib-compat.1.6.1
Due to the errors, the following have been cancelled
 - install   javalib.2.3

The former state can be restored with opam switch import "/home/opam/.opam/4.02.0+trunk/backup/state-20140723043700.export"
'opam install javalib' failed.
