++ opam install dbm -e ubuntu
Ubuntu depexts: libgdbm-dev
+ depext=libgdbm-dev
+ echo Ubuntu depexts: libgdbm-dev
+ '[' libgdbm-dev '!=' '' ']'
+ sudo apt-get install -qq -y build-essential m4
+ sudo apt-get install -qq -y libgdbm-dev
debconf: unable to initialize frontend: Dialog
debconf: (Dialog frontend will not work on a dumb terminal, an emacs shell buffer, or without a controlling terminal.)
debconf: falling back to frontend: Readline
debconf: unable to initialize frontend: Readline
debconf: (This frontend requires a controlling tty.)
debconf: falling back to frontend: Teletype
dpkg-preconfigure: unable to re-open stdin: 
Selecting previously unselected package libgdbm-dev.
(Reading database ... 20147 files and directories currently installed.)
Preparing to unpack .../libgdbm-dev_1.8.3-12build1_amd64.deb ...
Unpacking libgdbm-dev (1.8.3-12build1) ...
Setting up libgdbm-dev (1.8.3-12build1) ...
++ opam install dbm -e source,linux
+ srcext=
Ubuntu srcexts:
+ echo Ubuntu srcexts:
+ '[' '' '!=' '' ']'
+ opam install dbm
The following actions will be performed:
 - install   dbm.1.0
=== 1 to install ===

=-=- Synchronizing package archives -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[default] Synchronizing with /home/opam/opam-repository/archives/dbm.1.0+opam.tar.gz
sending incremental file list
dbm.1.0+opam.tar.gz

sent 14,693 bytes  received 35 bytes  29,456.00 bytes/sec
total size is 14,565  speedup is 0.99

=-=- Installing packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Applying hasgotfix.patch.
patching file configure
Applying include_fix.patch.
patching file Makefile
Building dbm.1.0:
  mkdir -p /home/opam/.opam/4.02.0+trunk/lib/dbm
  ./configure
  make all
  make test
  make install STUBLIBDIR=/home/opam/.opam/4.02.0+trunk/lib/stublibs LIBDIR=/home/opam/.opam/4.02.0+trunk/lib/dbm
  cp META /home/opam/.opam/4.02.0+trunk/lib/dbm
Configuring for OCaml version 4.02.1+dev0-2014-08-29

Configuration for the "camldbm" library:
        headers found in ......... /usr/include
        options for compiling .... -DDBM_USES_GDBM_NDBM
        options for linking ...... -lgdbm_compat -lgdbm

Configuration successful

ocamlc -c -ccopt "" -ccopt "-DDBM_USES_GDBM_NDBM" cldbm.c
ocamlmklib -oc camldbm cldbm.o -lgdbm_compat -lgdbm
ocamlc -c  dbm.mli
ocamlc -c  dbm.ml
ocamlmklib -o dbm -oc camldbm -linkall dbm.cmo -lgdbm_compat -lgdbm
ocamlopt -c  dbm.ml
