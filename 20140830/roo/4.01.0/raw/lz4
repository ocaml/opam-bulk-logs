++ opam install lz4 -e ubuntu
Ubuntu depexts: libffi-dev
+ depext=libffi-dev
+ echo Ubuntu depexts: libffi-dev
+ '[' libffi-dev '!=' '' ']'
+ sudo apt-get install -qq -y build-essential m4
+ sudo apt-get install -qq -y libffi-dev
debconf: unable to initialize frontend: Dialog
debconf: (Dialog frontend will not work on a dumb terminal, an emacs shell buffer, or without a controlling terminal.)
debconf: falling back to frontend: Readline
debconf: unable to initialize frontend: Readline
debconf: (This frontend requires a controlling tty.)
debconf: falling back to frontend: Teletype
dpkg-preconfigure: unable to re-open stdin: 
Selecting previously unselected package libffi-dev:amd64.
(Reading database ... 20147 files and directories currently installed.)
Preparing to unpack .../libffi-dev_3.1~rc1+r3.0.13-12_amd64.deb ...
Unpacking libffi-dev:amd64 (3.1~rc1+r3.0.13-12) ...
Setting up libffi-dev:amd64 (3.1~rc1+r3.0.13-12) ...
++ opam install lz4 -e source,linux
+ srcext=https://gist.githubusercontent.com/whitequark/eef074a8daa14602e447/raw/c151d3ab2f35f6cac54c7ef7459e2bbfff852938/install.sh
+ echo Ubuntu srcexts: https://gist.githubusercontent.com/whitequark/eef074a8daa14602e447/raw/c151d3ab2f35f6cac54c7ef7459e2bbfff852938/install.sh
+ '[' https://gist.githubusercontent.com/whitequark/eef074a8daa14602e447/raw/c151d3ab2f35f6cac54c7ef7459e2bbfff852938/install.sh '!=' '' ']'
Ubuntu srcexts: https://gist.githubusercontent.com/whitequark/eef074a8daa14602e447/raw/c151d3ab2f35f6cac54c7ef7459e2bbfff852938/install.sh
++ mktemp
+ t=/tmp/tmp.cIZopjp6SK
+ curl -sL https://gist.githubusercontent.com/whitequark/eef074a8daa14602e447/raw/c151d3ab2f35f6cac54c7ef7459e2bbfff852938/install.sh
+ bash -ex /tmp/tmp.cIZopjp6SK
+ V=r119
+ curl -OJL https://github.com/Cyan4973/lz4/archive/r119.tar.gz
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   118    0   118    0     0    324      0 --:--:-- --:--:-- --:--:--   325
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0  112k    0     0  76770      0 --:--:--  0:00:01 --:--:--  109k  0 curl: Saved to filename 'lz4-r119.tar.gz'
lz4-r119/
lz4-r119/.travis.yml
lz4-r119/LICENSE
lz4-r119/LZ4_Streaming_Format.odt
lz4-r119/Makefile
lz4-r119/NEWS
lz4-r119/README.md
lz4-r119/cmake_unofficial/
lz4-r119/cmake_unofficial/CMakeLists.txt
lz4-r119/lz4.c
lz4-r119/lz4.h
lz4-r119/lz4_format_description.txt
lz4-r119/lz4hc.c
lz4-r119/lz4hc.h
lz4-r119/programs/
lz4-r119/programs/COPYING
lz4-r119/programs/Makefile
lz4-r119/programs/bench.c
lz4-r119/programs/bench.h
lz4-r119/programs/datagen.c
lz4-r119/programs/fullbench.c
lz4-r119/programs/fuzzer.c
lz4-r119/programs/lz4.1
lz4-r119/programs/lz4c.1
lz4-r119/programs/lz4cat.1
lz4-r119/programs/lz4cli.c
lz4-r119/programs/lz4io.c
lz4-r119/programs/lz4io.h
lz4-r119/programs/xxhash.c
lz4-r119/programs/xxhash.h
compiling static library
    0    0  155k    0     0  97587      0 --:--:--  0:00:01 --:--:--  134k
+ tar -zxvf lz4-r119.tar.gz
+ cd lz4-r119
+ make
