++ opam install nbd -e centos,centos-7
+ depext=
CentOS 7 depexts:
+ echo CentOS 7 depexts:
+ '[' '' '!=' '' ']'
+ opam install nbd
The following actions will be performed:
 - install   camlp4.4.01.0                         [required by lwt, cstruct]
 - install   obuild.0.0.9                          [required by nbd]
 - install   cmdliner.0.9.5                        [required by nbd]
 - install   lwt.2.4.5                             [required by nbd]
 - install   cstruct.0.5.3                         [required by nbd]
 - install   nbd.1.0.2
=== 6 to install ===

=-=-=-=-=-=-=-=-=-=-=-=- Synchronizing package archives -=-=-=-=-=-=-=-=-=-=-=-=
[cmdliner.0.9.5] Downloading http://erratique.ch/software/cmdliner/releases/cmdliner-0.9.5.tbz
[cstruct.0.5.3] Downloading https://github.com/mirage/ocaml-cstruct/archive/ocaml-cstruct-0.5.3.tar.gz
[lwt.2.4.5] Downloading https://github.com/ocsigen/lwt/archive/2.4.5.tar.gz
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100 47938  100 47938    0     0   199k      0 --:--:-- --:--:-- --:--:--  200k
200
[nbd.1.0.2] Downloading https://github.com/xapi-project/nbd/archive/v1.0.2/nbd-1.0.2.tar.gz
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   118    0   118    0     0    175      0 --:--:-- --:--:-- --:--:--   175
100   141    0   141    0     0    208      0 --:--:-- --:--:-- --:--:--   208
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   124    0   124    0     0    173      0 --:--:-- --:--:-- --:--:--   173
  0     0    0     0    0     0      0      0 --:--:--  0:00:01 --:--:--     0  0     0    0     0    0     0      0      0 --:--:--  0:00:01 --:--:--     0100 57439  100 57439    0     0  39525      0  0:00:01  0:00:01 --:--:--  167k
200
[obuild.0.0.9] Downloading https://github.com/ocaml-obuild/obuild/archive/obuild-v0.0.9.tar.gz
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100  291k  100  291k    0     0   158k      0  0:00:01  0:00:01 --:--:--  408k
200
  0     0    0 31008    0     0  19157      0 --:--:--  0:00:01 --:--:-- 19157  0     0    0 63726    0     0  36688      0 --:--:--  0:00:01 --:--:--  270k
200
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   134    0   134    0     0    170      0 --:--:-- --:--:-- --:--:--   170
 20 71354   20 14553    0     0  10029      0  0:00:07  0:00:01  0:00:06 10029100 71354  100 71354    0     0  43218      0  0:00:01  0:00:01 --:--:--  277k
200

=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Installing packages -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Installing camlp4.4.01.0.
Building cmdliner.0.9.5:
  ocaml pkg/git.ml
  ocaml pkg/build.ml native=true native-dynlink=true
ocamlfind ocamldep -modules src/cmdliner.ml > src/cmdliner.ml.depends
ocamlfind ocamldep -modules src/cmdliner.mli > src/cmdliner.mli.depends
ocamlfind ocamlc -c -I src -I test -o src/cmdliner.cmi src/cmdliner.mli
ocamlfind ocamlopt -c -annot -bin-annot -I src -I test -o src/cmdliner.cmx src/cmdliner.ml
ocamlfind ocamlopt -a src/cmdliner.cmx -o src/cmdliner.cmxa
ocamlfind ocamlc -c -annot -bin-annot -I src -I test -o src/cmdliner.cmo src/cmdliner.ml
ocamlfind ocamlc -a src/cmdliner.cmo -o src/cmdliner.cma
ocamlfind ocamlopt -shared src/cmdliner.cmx -o src/cmdliner.cmxs
Installing cmdliner.0.9.5.
Building obuild.0.0.9:
  ./bootstrap
  cp dist/build/obuild/obuild dist/build/obuild-simple/obuild-simple /home/opam/.opam/4.01.0/bin
COMPILING fugue
COMPILING filepath
COMPILING filesystem
BUILDING library obuild_ext.cmxa
COMPILING types
COMPILING gconf
COMPILING filetype
COMPILING dag
COMPILING libname
COMPILING pp
COMPILING expr
COMPILING utils
COMPILING modname
COMPILING taskdep
COMPILING helper
COMPILING dagutils
COMPILING process
COMPILING findlibConf
COMPILING scheduler
COMPILING prog
COMPILING dependencies
COMPILING generators
COMPILING hier
COMPILING meta
COMPILING target
COMPILING dist
COMPILING project
COMPILING analyze
COMPILING configure
COMPILING prepare
COMPILING buildprogs
COMPILING build
COMPILING exception
BUILDING library obuild.cmxa
COMPILING sdist
COMPILING doc
COMPILING init
COMPILING help
COMPILING install
COMPILING path_generated
COMPILING main
LINKING obuild.bootstrap
Configuring obuild-0.0.9...
[ 1 of 55] Compiling Ext.Fugue                     
[ 2 of 55] Intfing Ext.Filepath                  
[ 3 of 55] Compiling Ext.Filepath                  
[ 4 of 55] Intfing Ext.Filesystem                
[ 5 of 55] Compiling Ext.Filesystem                
[ 6 of 55] Packing Ext                           
[ 7 of 55] Linking library dist/build/lib-obuild.ext/obuild_ext.cmxa
[ 7 of 55] Linking library dist/build/lib-obuild.ext/obuild_ext.cmxs
[ 7 of 55] Linking library dist/build/lib-obuild.ext/obuild_ext.cma
[ 8 of 55] Checking dist/build/lib-obuild.ext
[ 9 of 55] Compiling Obuild.Dag                    
[10 of 55] Compiling Obuild.Filetype               
[11 of 55] Compiling Obuild.Expr                   
[12 of 55] Compiling Obuild.Gconf                  
[13 of 55] Compiling Obuild.Types                  
[14 of 55] Compiling Obuild.Pp                     
[15 of 55] Compiling Obuild.Taskdep                
[16 of 55] Compiling Obuild.Libname                
[17 of 55] Compiling Obuild.Modname                
[18 of 55] Compiling Obuild.Utils                  
[19 of 55] Compiling Obuild.Dagutils               
[20 of 55] Compiling Obuild.Helper                 
[21 of 55] Compiling Obuild.Process                
[22 of 55] Compiling Obuild.Scheduler              
[23 of 55] Compiling Obuild.FindlibConf            
[24 of 55] Compiling Obuild.Prog                   
[25 of 55] Compiling Obuild.Generators             
[26 of 55] Compiling Obuild.Dependencies           
[27 of 55] Compiling Obuild.Meta                   
[28 of 55] Compiling Obuild.Hier                   
[29 of 55] Compiling Obuild.Target                 
[30 of 55] Compiling Obuild.Project                
[31 of 55] Compiling Obuild.Dist                   
[32 of 55] Compiling Obuild.Analyze                
[33 of 55] Compiling Obuild.Configure              
[34 of 55] Compiling Obuild.Prepare                
[35 of 55] Compiling Obuild.Buildprogs             
[36 of 55] Compiling Obuild.Build                  
[37 of 55] Compiling Obuild.Exception              
[38 of 55] Packing Obuild                        
[39 of 55] Linking library dist/build/lib-obuild/obuild.cmxa
[39 of 55] Linking library dist/build/lib-obuild/obuild.cmxs
[39 of 55] Linking library dist/build/lib-obuild/obuild.cma
[40 of 55] Checking dist/build/lib-obuild
[41 of 55] Compiling Assimilate_oasis              
[42 of 55] Compiling Simple                        
[43 of 55] Compiling Install                       
[44 of 55] Compiling Doc                           
[45 of 55] Compiling Sdist                         
[46 of 55] Compiling Help                          
[47 of 55] Compiling Path_generated                
[48 of 55] Compiling Init                          
[49 of 55] Linking executable dist/build/obuild-from-oasis/obuild-from-oasis
[50 of 55] Linking executable dist/build/obuild-simple/obuild-simple
[51 of 55] Compiling Main                          
[52 of 55] Checking dist/build/obuild-from-oasis
[53 of 55] Checking dist/build/obuild-simple
[54 of 55] Linking executable dist/build/obuild/obuild
[55 of 55] Checking dist/build/obuild

real	0m3.278s
user	0m2.429s
sys	0m1.728s
Installing obuild.0.0.9.
Building cstruct.0.5.3:
  make
  make install
ocaml setup.ml -configure

Configuration: 
ocamlfind: ........................................... /home/opam/.opam/4.01.0/bin/ocamlfind
ocamlc: .............................................. /home/opam/.opam/4.01.0/bin/ocamlc.opt
ocamlopt: ............................................ /home/opam/.opam/4.01.0/bin/ocamlopt.opt
ocamlbuild: .......................................... /home/opam/.opam/4.01.0/bin/ocamlbuild
Package name: ........................................ cstruct
Package version: ..................................... 0.5.3
os_type: ............................................. Unix
system: .............................................. linux
architecture: ........................................ amd64
ccomp_type: .......................................... cc
ocaml_version: ....................................... 4.01.0
standard_library_default: ............................ /home/opam/.opam/4.01.0/lib/ocaml
standard_library: .................................... /home/opam/.opam/4.01.0/lib/ocaml
standard_runtime: .................................... /home/opam/.opam/4.01.0/bin/ocamlrun
bytecomp_c_compiler: ................................. gcc -fno-defer-pop -Wall -D_FILE_OFFSET_BITS=64 -D_REENTRANT -fPIC
native_c_compiler: ................................... gcc -Wall -D_FILE_OFFSET_BITS=64 -D_REENTRANT
model: ............................................... default
ext_obj: ............................................. .o
ext_asm: ............................................. .s
ext_lib: ............................................. .a
ext_dll: ............................................. .so
default_executable_name: ............................. a.out
systhread_supported: ................................. true
Install architecture-independent files dir: .......... /usr/local
Install architecture-dependent files in dir: ......... $prefix
User executables: .................................... $exec_prefix/bin
System admin executables: ............................ $exec_prefix/sbin
Program executables: ................................. $exec_prefix/libexec
Read-only single-machine data: ....................... $prefix/etc
Modifiable architecture-independent data: ............ $prefix/com
Modifiable single-machine data: ...................... $prefix/var
Object code libraries: ............................... $exec_prefix/lib
Read-only arch-independent data root: ................ $prefix/share
Read-only architecture-independent data: ............. $datarootdir
Info documentation: .................................. $datarootdir/info
Locale-dependent data: ............................... $datarootdir/locale
Man documentation: ................................... $datarootdir/man
Documentation root: .................................. $datarootdir/doc/$pkg_name
HTML documentation: .................................. $docdir
DVI documentation: ................................... $docdir
PDF documentation: ................................... $docdir
PS documentation: .................................... $docdir
findlib_version: ..................................... 1.5.2
is_native: ........................................... true
suffix_program: ...................................... 
Remove a file.: ...................................... rm -f
Remove a directory.: ................................. rm -rf
Turn ocaml debug flag on: ............................ true
Turn ocaml profile flag on: .......................... false
Compiler support generation of .cmxs.: ............... true
OCamlbuild additional flags: ......................... 
Create documentations: ............................... true
Compile tests executable and library and run them: ... false
pkg_bigarray: ........................................ /home/opam/.opam/4.01.0/lib/ocaml
pkg_camlp4_lib: ...................................... /home/opam/.opam/4.01.0/lib/ocaml/camlp4
pkg_camlp4_quotations_r: ............................. /home/opam/.opam/4.01.0/lib/ocaml/camlp4
pkg_camlp4_extend: ................................... /home/opam/.opam/4.01.0/lib/ocaml/camlp4

ocaml setup.ml -build -j 4
/home/opam/.opam/4.01.0/bin/ocamlopt.opt unix.cmxa -I /home/opam/.opam/4.01.0/lib/ocaml/ocamlbuild /home/opam/.opam/4.01.0/lib/ocaml/ocamlbuild/ocamlbuildlib.cmxa myocamlbuild.ml /home/opam/.opam/4.01.0/lib/ocaml/ocamlbuild/ocamlbuild.cmx -o myocamlbuild
ocamlfind ocamlc -ccopt -O3 -c lib/cstruct_stubs.c
mv cstruct_stubs.o lib/cstruct_stubs.o
/home/opam/.opam/4.01.0/bin/ocamlmklib -o lib/cstruct_stubs lib/cstruct_stubs.o
ocamlfind ocamldep -package bigarray -modules lib/cstruct.mli > lib/cstruct.mli.depends
ocamlfind ocamlc -c -g -annot -ccopt -O3 -package bigarray -I lib -o lib/cstruct.cmi lib/cstruct.mli
ocamlfind ocamldep -package bigarray -modules lib/cstruct.ml > lib/cstruct.ml.depends
ocamlfind ocamlc -c -g -annot -ccopt -O3 -package bigarray -I lib -o lib/cstruct.cmo lib/cstruct.ml
ocamlfind ocamlc -a -dllib -lcstruct_stubs -cclib -lcstruct_stubs lib/cstruct.cmo -o lib/cstruct.cma
ocamlfind ocamlopt -c -g -annot -ccopt -O3 -package bigarray -I lib -o lib/cstruct.cmx lib/cstruct.ml
ocamlfind ocamlopt -a -cclib -lcstruct_stubs lib/cstruct.cmx -o lib/cstruct.cmxa
ocamlfind ocamlopt -shared -I lib/ lib/cstruct.cmx -o lib/cstruct.cmxs
ocamlfind ocamldep -package bigarray -package camlp4 -package camlp4.extend -package camlp4.lib -package camlp4.quotations.r -syntax camlp4o -modules syntax/pa_cstruct.ml > syntax/pa_cstruct.ml.depends
ocamlfind ocamlc -c -g -annot -package bigarray -package camlp4 -package camlp4.extend -package camlp4.lib -package camlp4.quotations.r -syntax camlp4o -I syntax -o syntax/pa_cstruct.cmo syntax/pa_cstruct.ml
ocamlfind ocamlc -a syntax/pa_cstruct.cmo -o syntax/cstruct-syntax.cma
ocamlfind ocamlopt -c -g -annot -package bigarray -package camlp4 -package camlp4.extend -package camlp4.lib -package camlp4.quotations.r -syntax camlp4o -I syntax -o syntax/pa_cstruct.cmx syntax/pa_cstruct.ml
ocamlfind ocamlopt -a syntax/pa_cstruct.cmx -o syntax/cstruct-syntax.cmxa
ocamlfind ocamlopt -shared -linkall syntax/cstruct-syntax.cmxa -o syntax/cstruct-syntax.cmxs
# No parallelism done
ocaml setup.ml -install
Installed /home/opam/.opam/4.01.0/lib/cstruct/cstruct.mli
Installed /home/opam/.opam/4.01.0/lib/cstruct/libcstruct_stubs.a
Installed /home/opam/.opam/4.01.0/lib/cstruct/cstruct.cma
Installed /home/opam/.opam/4.01.0/lib/cstruct/cstruct.cmxa
Installed /home/opam/.opam/4.01.0/lib/cstruct/cstruct.a
Installed /home/opam/.opam/4.01.0/lib/cstruct/cstruct.cmxs
Installed /home/opam/.opam/4.01.0/lib/cstruct/cstruct.cmi
Installed /home/opam/.opam/4.01.0/lib/cstruct/cstruct.cmx
Installed /home/opam/.opam/4.01.0/lib/cstruct/pa_cstruct.ml
Installed /home/opam/.opam/4.01.0/lib/cstruct/cstruct-syntax.cma
Installed /home/opam/.opam/4.01.0/lib/cstruct/cstruct-syntax.cmxa
Installed /home/opam/.opam/4.01.0/lib/cstruct/cstruct-syntax.a
Installed /home/opam/.opam/4.01.0/lib/cstruct/cstruct-syntax.cmxs
Installed /home/opam/.opam/4.01.0/lib/cstruct/pa_cstruct.cmi
Installed /home/opam/.opam/4.01.0/lib/cstruct/pa_cstruct.cmx
Installed /home/opam/.opam/4.01.0/lib/cstruct/META
Installed /home/opam/.opam/4.01.0/lib/stublibs/dllcstruct_stubs.so
Installed /home/opam/.opam/4.01.0/lib/stublibs/dllcstruct_stubs.so.owner
ocamlfind: [WARNING] You have installed DLLs but the directory /home/opam/.opam/4.01.0/lib/stublibs is not mentioned in ld.conf
Installing cstruct.0.5.3.
Building lwt.2.4.5:
  ./configure --disable-libev --disable-react --disable-ssl --enable-unix --enable-extra --enable-preemptive --disable-glib
  make build
  make install
not checking for pkg-config
not checking for libev
testing for pthread: ........................... available
not checking for glib
testing for eventfd: ........................... available
testing for fd passing: ........................ available
testing for sched_getcpu: ...................... available
testing for affinity getting/setting: .......... available
testing for credentials getting (Linux): ....... available
testing for credentials getting (NetBSD): ...... unavailable
testing for credentials getting (OpenBSD): ..... unavailable
testing for credentials getting (FreeBSD): ..... unavailable
testing for credentials getting (getpeereid): .. unavailable
testing for fdatasync: ......................... available
testing for netdb_reentrant: ................... available
Generating C stubs...

Configuration: 
ocamlfind: ........................................... /home/opam/.opam/4.01.0/bin/ocamlfind
ocamlc: .............................................. /home/opam/.opam/4.01.0/bin/ocamlc.opt
ocamlopt: ............................................ /home/opam/.opam/4.01.0/bin/ocamlopt.opt
ocamlbuild: .......................................... /home/opam/.opam/4.01.0/bin/ocamlbuild
Package name: ........................................ lwt
Package version: ..................................... 2.4.5
os_type: ............................................. Unix
system: .............................................. linux
architecture: ........................................ amd64
ccomp_type: .......................................... cc
ocaml_version: ....................................... 4.01.0
standard_library_default: ............................ /home/opam/.opam/4.01.0/lib/ocaml
standard_library: .................................... /home/opam/.opam/4.01.0/lib/ocaml
standard_runtime: .................................... /home/opam/.opam/4.01.0/bin/ocamlrun
bytecomp_c_compiler: ................................. gcc -fno-defer-pop -Wall -D_FILE_OFFSET_BITS=64 -D_REENTRANT -fPIC
native_c_compiler: ................................... gcc -Wall -D_FILE_OFFSET_BITS=64 -D_REENTRANT
model: ............................................... default
ext_obj: ............................................. .o
ext_asm: ............................................. .s
ext_lib: ............................................. .a
ext_dll: ............................................. .so
default_executable_name: ............................. a.out
systhread_supported: ................................. true
Install architecture-independent files dir: .......... /usr/local
Install architecture-dependent files in dir: ......... $prefix
User executables: .................................... $exec_prefix/bin
System admin executables: ............................ $exec_prefix/sbin
Program executables: ................................. $exec_prefix/libexec
Read-only single-machine data: ....................... $prefix/etc
Modifiable architecture-independent data: ............ $prefix/com
Modifiable single-machine data: ...................... $prefix/var
Object code libraries: ............................... $exec_prefix/lib
Read-only arch-independent data root: ................ $prefix/share
Read-only architecture-independent data: ............. $datarootdir
Info documentation: .................................. $datarootdir/info
Locale-dependent data: ............................... $datarootdir/locale
Man documentation: ................................... $datarootdir/man
Documentation root: .................................. $datarootdir/doc/$pkg_name
HTML documentation: .................................. $docdir
DVI documentation: ................................... $docdir
PDF documentation: ................................... $docdir
PS documentation: .................................... $docdir
findlib_version: ..................................... 1.5.2
is_native: ........................................... true
suffix_program: ...................................... 
Remove a file.: ...................................... rm -f
Remove a directory.: ................................. rm -rf
Turn ocaml debug flag on: ............................ true
Turn ocaml profile flag on: .......................... false
Compiler support generation of .cmxs.: ............... true
OCamlbuild additional flags: ......................... 
Compiles for Android: ................................ false
build and install everything: ........................ false
Build the syntax extension: .......................... true
Unix support: ........................................ true
React helpers: ....................................... false
Glib integration: .................................... false
SSL support: ......................................... false
Text mode utilities (deprecated): .................... false
Preemptive threads support: .......................... true
Asynchronous unix functions: ......................... true
Enhanced toplevel: ................................... false
Compile with libev support: .......................... false
Use the libev backend by default: .................... true
Use pthread: ......................................... true
Create documentations: ............................... true
Compile tests executable and library and run them: ... false
pkg_camlp4: .......................................... /home/opam/.opam/4.01.0/lib/ocaml/camlp4
pkg_camlp4_quotations_o: ............................. /home/opam/.opam/4.01.0/lib/ocaml/camlp4
pkg_unix: ............................................ /home/opam/.opam/4.01.0/lib/ocaml
pkg_bigarray: ........................................ /home/opam/.opam/4.01.0/lib/ocaml
pkg_threads: ......................................... /home/opam/.opam/4.01.0/lib/ocaml
pkg_camlp4_extend: ................................... /home/opam/.opam/4.01.0/lib/ocaml/camlp4
ocamldoc: ............................................ /home/opam/.opam/4.01.0/bin/ocamldoc

ocamlopt.opt -o setup.exe setup.ml || ocamlopt -o setup.exe setup.ml || ocamlc -o setup.exe setup.ml
rm -f setup.cmx setup.cmi setup.o setup.obj setup.cmo
./setup.exe -configure 
not checking for pkg-config
not checking for libev
testing for pthread: ........................... available
not checking for glib
testing for eventfd: ........................... available
testing for fd passing: ........................ available
testing for sched_getcpu: ...................... available
testing for affinity getting/setting: .......... available
testing for credentials getting (Linux): ....... available
testing for credentials getting (NetBSD): ...... unavailable
testing for credentials getting (OpenBSD): ..... unavailable
testing for credentials getting (FreeBSD): ..... unavailable
testing for credentials getting (getpeereid): .. unavailable
testing for fdatasync: ......................... available
testing for netdb_reentrant: ................... available
Generating C stubs...
